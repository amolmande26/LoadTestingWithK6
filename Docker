# Build the k6 binary with the extension
FROM golang:1.24.0 as builder
RUN go install go.k6.io/xk6/cmd/xk√≥@latest
# Feel free to add other extensions using the '-with ....'.
RUN xk6 build \
        --with github.com/avitalique/xk6-file@latest \
        --with github.com/grafana/xk6-kubernetes \
        --output /k6

# Use the operator's base image and Override the k6 binary
FROM grafana/k6:latest
COPY --from=builder /k6 /usr/bin/k6

# Setting up work directory
WORKDIR /test

# Copy scripts and data sync file into our app
COPY ./InputData.txt /test


# Starting the application
CMD ["run", "main.js"]